<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="phonelist.css">
    <link rel="stylesheet" href="ShoppingCart.css">
    <script src="data.js"></script>
</head>
<body>
    <div class="flex-container">
        <div class="head">
            <div class="head-in"></div>
            <div class="head-in2"><b>Moblie Phone Shop</b></div>
            <div class="head-in3"></div> 
        </div>
        <div class="main-content">
            <div class="sidebar">
                <a href="phonelist.html" class="phone-list-side-bar phone-list-side-bar-first">Phone List</a>
                <a href="addnewphone.html" class="phone-list-side-bar">Add new phone</a>
                <a href="ShoppingCart.html" class="phone-list-side-bar"><b>Shopping Cart</b></a>
            </div>
            <div class="content">




                <div class="containerin"> 
                    <div class="row"> 
                        <div class="sectionPhoneList"><b>Shopping Cart</b></div> 
                    </div> 



                    <div class="box-cala2" id="shoppingBox">
                        
                        <div class="in-box-cala">
                            <div class="phone-name"><b>Name</b></div>
                            <div class="price"><b>Quantity</b></div>
                            <div>
                                
                                <span><b>Price</b></span>
                            </div>
                        </div> 

                        <!-- script here -->
                    </div>


                    <div class="box-total">
                        <div class="in-box-cala">
                            <div class="phone-name">Total</div>
                            <div class="price" id="totalPhone">3 phones</div>
                            <div>
                                <span>&nbsp;&nbsp;</span>
                                <span style="color: #3b7d38;"><b id="totalPhonePrice">95,000</b></span>
                            </div>
                        </div>
                    </div> 


                    <div class="row"> 
                        <div class="sectionPhoneList"></div> 
                        <div class="section-pay">Pay</div> 
                    </div> 
                




                </div>        
            </div>
        </div>
    </div>
</body>
</html>

<script>
    const cartItems = JSON.parse(localStorage.getItem("cart")) || [];

    let totalQuantity = 0;
    let totalPrice = 0;

    cartItems.forEach(function(item) 
    {
        totalQuantity += item.quantity;
        totalPrice += item.price;

        const shoppingBox = document.getElementById("shoppingBox"); 
            // สร้างกล่องหลัก
        const inBoxCala = document.createElement('div');
        inBoxCala.className = 'in-box-cala';

        // สร้างชื่อโทรศัพท์
        const phoneName = document.createElement('div');
        phoneName.className = 'phone-name';
        phoneName.textContent = item.title;

        // สร้างราคาหลัก
        const price = document.createElement('div');
        price.className = 'price';
        price.textContent = item.quantity + " x " + item.price;

        // สร้างส่วนที่แสดงผลรวมราคา
        const totalDiv = document.createElement('div');

        const equalsSpan = document.createElement('span');
        equalsSpan.textContent = '= ';

        const totalSpan = document.createElement('span');
        totalSpan.textContent = item.quantity * item.price;

        // เพิ่ม span ทั้งสองเข้าไปใน totalDiv
        totalDiv.appendChild(equalsSpan);
        totalDiv.appendChild(totalSpan);

        // เพิ่มองค์ประกอบทั้งหมดเข้าไปใน inBoxCala
        inBoxCala.appendChild(phoneName);
        inBoxCala.appendChild(price);
        inBoxCala.appendChild(totalDiv);

        shoppingBox.appendChild(inBoxCala); 
    });
    

    const totalPhoneQuantity = document.getElementById("totalPhone");
    totalPhoneQuantity.textContent = totalQuantity + " phones";

    const totalPhonePrice = document.getElementById("totalPhonePrice");
    totalPhonePrice.textContent = totalPrice;

</script>